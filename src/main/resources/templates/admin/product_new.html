<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>商品登録画面</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>

<header class="admin-header">
    <h1>商品登録</h1>
    <nav>
        <a th:href="@{/admin}">管理者ページ</a>
        <a th:href="@{/admin/products}">商品管理一覧へ戻る</a>
    </nav>
</header>

<main class="container">

    <!-- エラー表示 -->
    <div th:if="${#fields.hasErrors()}" class="error-box">
        <ul>
            <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
        </ul>
    </div>

    <!-- 登録フォーム -->
    <form th:action="@{/admin/product/new}" th:object="${productForm}"
          method="post" enctype="multipart/form-data" class="form-box">

        <!-- 商品名 -->
        <div class="form-group">
            <label>商品名</label>
            <input type="text" th:field="*{name}" placeholder="商品名を入力">
            <div class="error" th:errors="*{name}"></div>
        </div>

        <!-- 価格 -->
        <div class="form-group">
            <label>価格（円）</label>
            <input type="number" th:field="*{price}" min="0" step="1">
            <div class="error" th:errors="*{price}"></div>
        </div>

        <!-- カテゴリー -->
        <div class="form-group">
            <label>カテゴリー</label>
            <select th:field="*{category}">
                <option value="">選択してください</option>
                <option th:each="c : ${categories}"
                        th:value="${c}"
                        th:text="${c}">
                </option>
            </select>
            <div class="error" th:errors="*{category}"></div>
        </div>

        <!-- 在庫数 -->
        <div class="form-group">
            <label>在庫数</label>
            <input type="number" th:field="*{stock}" min="0">
            <div class="error" th:errors="*{stock}"></div>
        </div>

        <!-- 商品画像 -->
        <div class="form-group">
            <label>商品画像</label>
            <input type="file" th:field="*{imageFile}" accept="image/png,image/jpeg">
            <div class="error" th:errors="*{imageFile}"></div>
            <p class="note">※ JPG/PNG・1MB以内</p>
        </div>

        <!-- 商品説明 -->
        <div class="form-group">
            <label>商品説明</label>
            <textarea th:field="*{description}" rows="6"
                      placeholder="商品説明を入力（任意・1000文字まで）"></textarea>
            <div class="error" th:errors="*{description}"></div>
        </div>

        <!-- 公開/非公開-->
        <div class="form-group">
            <label>公開/非公開</label>
            <select th:field="*{isActive}">
                <option value="">選択してください</option>
                <option th:value="true" >公開</option>
                <option th:value="false" >非公開</option>
            </select>
            <div class="error" th:errors="*{isActive}"></div>
        </div>

        <!-- ボタン -->
        <div class="form-button">
            <button type="submit" class="btn-primary">登録</button>
            <a th:href="@{/admin/products}" class="btn-secondary">キャンセル</a>
        </div>
    </form>

</main>

</body>
</html>