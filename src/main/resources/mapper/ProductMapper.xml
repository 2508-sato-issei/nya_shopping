<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.nya_shopping.repository.ProductRepository">

    <!-- 商品登録 -->
    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO products (name, price, category, stock, image_url, description, is_active)
        VALUES (#{name}, #{price}, #{category}, #{stock}, #{imageUrl}, #{description}, #{isActive})
    </insert>

    <!-- 商品一括登録 -->
    <insert id="insertProducts" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO products
        (slip_id, billing_date, reason, transportation, round_trip, amount, subtotal, remark, original_file_name ,stored_file_name, created_date, updated_date)
        VALUES
        <foreach collection="list" item="d" separator=",">
            (#{d.slipId}, #{d.billingDate}, #{d.reason}, #{d.transportation}, #{d.roundTrip}, #{d.amount}, #{d.subtotal}, #{d.remark}, #{d.originalFileName}, #{d.storedFileName}, NOW(), NOW())
        </foreach>
    </insert>

</mapper>